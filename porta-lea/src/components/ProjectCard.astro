---
// src/components/ProjectCard.astro
interface Props {
  project: {
    id: string;
    title: string;
    image: string;
    technologies: string[];
    githubUrl?: string; 
    demoUrl?: string;   
    description?: string;
    category?: string;
  };
}

const { project } = Astro.props;
const hasLinks = project.githubUrl || project.demoUrl;
---

<article class="flex flex-col h-full bg-[#1a1a1a] border border-[#D1CCBD]/50 rounded-2xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:shadow-[#e1dbc9]/5 group">
  
  <div class="relative h-48 md:h-52 overflow-hidden bg-[#F3F0E8]">
    <img
      src={project.image}
      alt={`Miniatura del proyecto ${project.title}`}
      class="w-full h-full object-cover opacity-90 group-hover:scale-105 group-hover:opacity-100 transition-all duration-700"
      loading="lazy"
    />
    
    <div class="absolute top-4 left-4">
      <span class={`px-3 py-1 rounded-full text-[9px] font-bold uppercase tracking-widest border border-white/20 backdrop-blur-md text-white shadow-sm ${project.category === 'profesional' ? 'bg-[#E85A4F]/80' : 'bg-[#403B33]/80'}`}>
        {project.category === 'profesional' ? 'PRO' : 'LAB'}
      </span>
    </div>
  </div>

  <div class="p-6 flex-grow flex flex-col">
    <div class="flex items-start justify-between mb-4 gap-4">
      <h3 class="text-xl font-bold text-[#1A1A1A] leading-tight tracking-tight group-hover:text-[#E85A4F] transition-colors">
        {project.title}
      </h3>
      <span class="font-mono text-[10px] text-[#8E8D8A] mt-1 shrink-0">#{project.id}</span>
    </div>

    {project.description && (
      <p class="text-sm text-[#403B33]/70 leading-relaxed mb-6 font-medium">
        {project.description}
      </p>
    )}

    <div class="flex flex-wrap gap-2 mb-8">
      {project.technologies.map(tech => (
        <span class="text-[9px] font-mono font-bold px-2.5 py-1 bg-[#F3F0E8] text-[#8E8D8A] rounded-md border border-transparent group-hover:border-[#D1CCBD]/50 transition-all">
          {tech}
        </span>
      ))}
    </div>

    <div class="mt-auto pt-6 border-t border-[#F3F0E8]">
      {hasLinks ? (
        <div class="grid grid-cols-2 gap-4">
          {project.demoUrl && (
            <a
              href={project.demoUrl}
              target="_blank"
              class="flex items-center justify-center gap-2 py-2.5 bg-[#1A1A1A] text-white rounded-xl text-xs font-bold transition-all hover:bg-[#E85A4F] hover:shadow-lg hover:shadow-[#E85A4F]/20"
            >
              SITIO_WEB
              <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
              </svg>
            </a>
          )}

          {project.githubUrl && (
            <a
              href={project.githubUrl}
              target="_blank"
              class="flex items-center justify-center gap-2 py-2.5 border border-[#D1CCBD] text-[#403B33] rounded-xl text-xs font-bold transition-all hover:bg-[#F3F0E8] hover:border-[#403B33]"
            >
              GITHUB
              <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.477 2 2 6.484 2 12.017 2 16.216 4.672 19.743 8.309 20.982c.5.094.68-.22.68-.485 0-.237-.008-.865-.013-1.698-2.69.586-3.253-1.3-3.253-1.3-.44-1.116-1.07-1.413-1.07-1.413-.876-.59.066-.58.066-.58.97.067 1.488.995 1.488.995.86 1.486 2.27 1.056 2.82.806.085-.628.337-1.056.617-1.295-2.15-.24-4.416-1.075-4.416-4.79 0-1.06.377-1.925 1-2.608-.1-.24-.435-1.238.096-2.573 0 0 .81-.26 2.642.987.77-.215 1.58-.322 2.39-.327.81.005 1.62.112 2.39.327 1.832-1.247 2.64-1 2.64-1 .53 1.335.2 2.333.1 2.573.623.683 1 1.548 1 2.608 0 3.722-2.27 4.545-4.425 4.786.357.307.678.915.678 1.855 0 1.336-.012 2.417-.012 2.748 0 .268.18.58.688.484C19.333 19.73 22 16.208 22 12.017 22 6.484 17.522 2 12 2Z" />
              </svg>
            </a>
          )}
        </div>
      ) : (
        <div class="py-2 px-4 rounded-xl bg-[#F3F0E8]/50 border border-dashed border-[#D1CCBD] flex items-center justify-center">
          <span class="text-[9px] font-mono font-bold text-[#8E8D8A] uppercase tracking-widest">Repositorio Privado</span>
        </div>
      )}
    </div>
  </div>
</article>