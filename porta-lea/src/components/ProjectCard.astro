---
// src/components/ProjectCard.astro
interface Props {
  project: {
    id: string;
    title: string;
    image: string;
    technologies: string[];
    githubUrl?: string; 
    demoUrl?: string;   
    description?: string;
  };
}

const { project } = Astro.props;

// Verificamos si tiene enlaces
const hasLinks = project.githubUrl || project.demoUrl;
---

<article class="flex flex-col h-full bg-[#111111] border-[3px] border-white shadow-[6px_6px_0px_0px_rgba(255,255,255,0.1)] transition-all duration-200 hover:translate-x-[-4px] hover:translate-y-[-4px] hover:shadow-[10px_10px_0px_0px_#ccff00] group">
  
  <div class="relative h-48 border-b-[3px] border-white overflow-hidden bg-black">
    <img
      src={project.image}
      alt={`Miniatura del proyecto ${project.title}`}
      class="w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500"
      loading="lazy"
    />
    <div class="absolute top-3 left-3 bg-black border-2 border-[#ccff00] px-2 py-0.5 shadow-[2px_2px_0px_0px_#ccff00]">
      <span class="text-[9px] font-black uppercase tracking-tighter text-[#ccff00]">FILE_{project.id}</span>
    </div>
  </div>

  <div class="p-5 flex-grow flex flex-col bg-[#111111]">
    <div class="flex items-start justify-between mb-3">
      <h3 class="text-xl font-black text-white font-mono leading-tight uppercase group-hover:text-[#ccff00] transition-colors">
        {project.title}
      </h3>
      <div class="w-2 h-2 bg-[#ccff00] group-hover:animate-ping"></div>
    </div>

    {project.description && (
      <p class="text-xs text-white/50 font-mono mb-6 line-clamp-2 italic">
        // {project.description}
      </p>
    )}

    <div class="flex flex-wrap gap-2 mb-8">
      {project.technologies.map(tech => (
        <span class="text-[9px] uppercase font-bold px-2 py-0.5 bg-black border-2 border-white/20 text-white/80 hover:border-[#ccff00] hover:text-[#ccff00] transition-colors">
          {tech}
        </span>
      ))}
    </div>

    <div class="mt-auto">
      {hasLinks ? (
        <div class="flex flex-col gap-3">
          {project.demoUrl && (
            <a
              href={project.demoUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="w-full inline-flex items-center justify-center px-4 py-2 bg-[#ccff00] text-black border-2 border-black font-mono font-black text-sm uppercase shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] active:shadow-none active:translate-x-[2px] active:translate-y-[2px] transition-all"
            >
              Ver_Sitio
              <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
              </svg>
            </a>
          )}

          {project.githubUrl && (
            <a
              href={project.githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="w-full inline-flex items-center justify-center px-4 py-2 bg-[#1a1a1a] text-white border-2 border-white font-mono font-bold text-sm uppercase hover:bg-white hover:text-black transition-all"
            >
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.477 2 2 6.484 2 12.017 2 16.216 4.672 19.743 8.309 20.982c.5.094.68-.22.68-.485 0-.237-.008-.865-.013-1.698-2.69.586-3.253-1.3-3.253-1.3-.44-1.116-1.07-1.413-1.07-1.413-.876-.59.066-.58.066-.58.97.067 1.488.995 1.488.995.86 1.486 2.27 1.056 2.82.806.085-.628.337-1.056.617-1.295-2.15-.24-4.416-1.075-4.416-4.79 0-1.06.377-1.925 1-2.608-.1-.24-.435-1.238.096-2.573 0 0 .81-.26 2.642.987.77-.215 1.58-.322 2.39-.327.81.005 1.62.112 2.39.327 1.832-1.247 2.64-1 2.64-1 .53 1.335.2 2.333.1 2.573.623.683 1 1.548 1 2.608 0 3.722-2.27 4.545-4.425 4.786.357.307.678.915.678 1.855 0 1.336-.012 2.417-.012 2.748 0 .268.18.58.688.484C19.333 19.73 22 16.208 22 12.017 22 6.484 17.522 2 12 2Z" />
              </svg>
              VIEW_SOURCE
            </a>
          )}
        </div>
      ) : (
        <div class="w-full py-3 border-2 border-white/10 bg-black flex items-center justify-center gap-2 group-hover:border-red-900/50 transition-colors">
          <span class="text-red-500 text-[10px] animate-pulse">‚óè</span>
          <span class="text-white/30 font-mono text-[10px] uppercase font-black tracking-widest">Access_Restricted // Private_Repo</span>
        </div>
      )}
    </div>
  </div>
</article>